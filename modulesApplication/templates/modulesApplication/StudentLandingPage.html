<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Student Homepage</title>
  <meta name="description" content="TBD">
  <meta name="author" content="TBD">

  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">

</head>

<body>
  <div class="page-wrapper">
    <input type="checkbox" id="check">
    <div class="sidebar">
      <header>
        <img class="mainlogo" src="images/mlogo.png" alt="logo">
      </header>
      <ul>
        <li><a href="#" class="btn"><i class="fas fa-home"></i>home</a></li>
        <li><a href="#" class="btn"><i class="fas fa-book-reader"></i>my courses</a></li>
        <li><a href="#" class="btn"><i class="fas fa-book-open"></i>all courses</a></li>
        <li><a href="#" class="btn"><i class="fas fa-book"></i>courses by year</a></li>
      </ul>
    </div>

    <nav class="topbar">
      <label for="check">
        <i class="fas fa-bars" id="btn"></i>
      </label>
      <label class="title"> moodule</label>
      <div class="search-box">
        <input class="search-txt" type="text" name="" placeholder="search">
        <a class="search-btn" href="#">
          <i class="fas fa-search"></i>
        </a>
      </div>

      <img src="images/slp-box-img.png" class="avatar" alt="avatar">
    </nav>

    <div class="slider-container">
      <div class="slides">
        <div class="slide">
          <img src="images/slider/img-3.png" alt="">
          <div class="slide-content">
            <h2> welcome [student name here] </h2>
          </div>
        </div>
        <div class="slide">
          <img src="images/slider/img-3.png" alt="">
          <div class="slide-content">
            <h2> slide test 2</h2>
          </div>
        </div>
        <div class="slide">
          <img src="images/slider/img-3.png" alt="">
          <div class="slide-content">
            <h2> slide test 3</h2>
          </div>
        </div>
      </div>
      <div class="slide-controls">
        <button id="prev-btn"><i class="fas fa-chevron-left"></i></button>
        <button id="next-btn"><i class="fas fa-chevron-right"></i></button>
      </div>
    </div>

    <div class="lp-container">
      <div class="lp-box" id="b1">
        <h2> my courses </h2>
        <a href="#" class="b-btn"><img class="box-img" src="images/slp-box-imge.png" alt="img"></a>
      </div>
      <div class="lp-box" id="b2">
        <h2> choose modules </h2>
        <a href="#" class="b-btn"><img class="box-img" src="images/slp-box-imge.png" alt="img"></a>
      </div>
      <div class="lp-box" id="b3">
        <h2> all courses </h2>
        <a href="#" class="b-btn"><img class="box-img" src="images/slp-box-imge.png" alt=" img"></a>
      </div>
    </div>
  </div>

  <script>
    const slideContainer = document.querySelector('.slider-container');
    const slide = document.querySelector('.slides');
    const nextBtn = document.getElementById('next-btn');
    const prevBtn = document.getElementById('prev-btn');
    const interval = 10000;

    let slides = document.querySelectorAll('.slide');
    let index = 1;
    let slideId;

    const firstClone = slides[0].cloneNode(true);
    const lastClone = slides[slides.length - 1].cloneNode(true);

    firstClone.id = 'first-clone';
    lastClone.id = 'last-clone';

    slide.append(firstClone);
    slide.prepend(lastClone);

    const slideWidth = slides[index].clientWidth;

    slide.style.transform = `translateX(${-slideWidth * index}px)`;

    console.log(slides);

    const startSlide = () => {
      slideId = setInterval(() => {
        moveToNextSlide();
      }, interval);
    };

    const getSlides = () => document.querySelectorAll('.slide');

    slide.addEventListener('transitionend', () => {
      slides = getSlides();
      if (slides[index].id === firstClone.id) {
        slide.style.transition = 'none';
        index = 1;
        slide.style.transform = `translateX(${-slideWidth * index}px)`;
      }

      if (slides[index].id === lastClone.id) {
        slide.style.transition = 'none';
        index = slides.length - 2;
        slide.style.transform = `translateX(${-slideWidth * index}px)`;
      }
    });

    const moveToNextSlide = () => {
      slides = getSlides();
      if (index >= slides.length - 1) return;
      index++;
      slide.style.transition = '.7s ease-out';
      slide.style.transform = `translateX(${-slideWidth * index}px)`;
    };

    const moveToPreviousSlide = () => {
      if (index <= 0) return;
      index--;
      slide.style.transition = '.7s ease-out';
      slide.style.transform = `translateX(${-slideWidth * index}px)`;
    };

    slideContainer.addEventListener('mouseenter', () => {
      clearInterval(slideId);
    });

    slideContainer.addEventListener('mouseleave', startSlide);
    nextBtn.addEventListener('click', moveToNextSlide);
    prevBtn.addEventListener('click', moveToPreviousSlide);

    startSlide();
  </script>
</body>

<!-- FOOTER - links will be added later -->
<div class="footer">
  <div class="row">
    <div class="col">
      <li>Royal Holloway, University of London</li>
      <li>Egham, Surrey, TW20 0EX</li>
    </div>
    <div class="col">
      <li>Terms & Conditions</li>
      <li>Privacy Policy</li>
    </div>
    <div class="col">
      <li>moodule@gmail.com</li>
      <li>T: +44 (0)1784 434455</li>
    </div>
  </div class="row">
  &copy; 2021 moodule.com | Designed by CS2815 Group 34
</div>
</div>

</html>